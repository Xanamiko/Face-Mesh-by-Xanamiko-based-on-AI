# Face Blur Live — улучшенная версия (Python 3.13)

Эта версия решает два твоих запроса:
1. **Не сходит блюр, если рука закрывает лицо или лицо частично выходит из кадра** — реализован легковесный трекер на основе сопоставления детекций по IoU + временное удержание (если детекция пропала, область всё ещё будет блюриться в течение N кадров).
2. **Усиленный блюр** — использована пикселизация + дополнительный gaussian, а также расширение области (margin) чтобы перекрывать руку, частично закрывающую лицо.

Файлы проекта:
- `desktop_blur.py` — локальный скрипт для запуска с веб-камеры (окно OpenCV). Поддерживает запись (`r` — старт/стоп), усиление/ослабление силы блюра клавишами `]` и `[`. `q` — выход.
- `app.py` — Flask веб-интерфейс с MJPEG-стримом, кнопками Start/Stop записи и ползунком силы блюра.
- `templates/index.html` — веб-страница с контролами (ползунок для силы блюра).
- `requirements.txt` — зависимости.
- `README.md` — этот файл.

Установка зависимостей:
```bash
python -m pip install -r requirements.txt
```

Запуск desktop:
```bash
python desktop_blur.py
```
Управление (desktop):
- `r` — старт/стоп записи (файл `output_YYYYMMDD_HHMMSS.avi`)
- `]` — увеличить силу блюра (pixelation)
- `[` — уменьшить силу блюра
- `q` — выход

Запуск веб (Flask):
```bash
python app.py
```
Открой `http://127.0.0.1:5000`, используй кнопки Start / Stop записи и ползунок "Blur strength". Файлы сохраняются в рабочей папке как `output_YYYYMMDD_HHMMSS.avi`.

Требования: `opencv-python`, `numpy`, `flask`.
Если есть проблемы с установкой `opencv-python` на Python 3.13 — попробуй `python -m pip install opencv-python-headless` (но для desktop-режима нужен GUI-capable opencv).

Если хочешь — могу заменить механику на MediaPipe (лучше для частичных/поворотных лиц) — это будет чуть точнее, но потребуется `mediapipe` и, возможно, дополнительные сроки на установку.
